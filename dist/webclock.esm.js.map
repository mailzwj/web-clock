{"version":3,"file":"webclock.esm.js","sources":["../src/constants.ts","../src/utils.ts","../src/index.ts"],"sourcesContent":["export const defaultOption: IClock.IOption = {\n  theme: 'apple-dark',\n  width: 240,\n  height: 240,\n  dpi: 2\n};\n\nexport const themes: Record<string, IClock.ITheme> = {\n  'apple-dark': {\n    backgroundColor: 'rgba(0, 0, 0, 0.85)',\n    faceColor: '#fff',\n    hourScaleColor: 'rgba(0, 0, 0, 0.6)',\n    minuteScaleColor: 'rgba(0, 0, 0, 0.3)',\n    textColor: 'rgba(0, 0, 0, 0.6)',\n    hourPointerColor: 'rgba(0, 0, 0, 0.85)',\n    minutePointerColor: 'rgba(0, 0, 0, 0.85)',\n    milliPointerColor: 'rgba(242, 162, 60, 1)',\n    centerCircleColor: '#fff'\n  },\n  'apple-light': {\n    backgroundColor: '#fff',\n    faceColor: 'rgba(0, 0, 0, 1)',\n    hourScaleColor: 'rgba(255, 255, 255, 0.6)',\n    minuteScaleColor: 'rgba(255, 255, 255, 0.3)',\n    textColor: 'rgba(255, 255, 255, 0.6)',\n    hourPointerColor: 'rgba(255, 255, 255, 0.85)',\n    minutePointerColor: 'rgba(255, 255, 255, 0.85)',\n    milliPointerColor: 'rgba(242, 162, 60, 1)',\n    centerCircleColor: '#fff'\n  },\n  'mi': {\n    backgroundColor: 'rgba(238, 113, 46, 1)',\n    faceColor: '#fff',\n    hourScaleColor: 'rgba(238, 113, 46, 0.6)',\n    minuteScaleColor: 'rgba(238, 113, 46, 0.3)',\n    textColor: 'rgba(238, 113, 46, 1)',\n    hourPointerColor: 'rgba(238, 113, 46, 1)',\n    minutePointerColor: 'rgba(238, 113, 46, 1)',\n    milliPointerColor: 'rgba(242, 162, 60, 1)',\n    centerCircleColor: '#fff'\n  }\n};\n","export const initCanvas = (canvas?: string | HTMLCanvasElement) => {\n  if (!canvas) {\n    const cvs = document.createElement('canvas');\n    document.body.appendChild(cvs);\n    return cvs;\n  }\n  if (typeof canvas === 'string') {\n    return document.querySelector(`#${canvas}`);\n  }\n  if (canvas instanceof HTMLCanvasElement) {\n    return canvas;\n  }\n  throw '参数错误';\n};\n","import { defaultOption, themes } from \"./constants\";\nimport { initCanvas } from \"./utils\";\n\nconst draw = (canvas: HTMLCanvasElement, render: (ctx: CanvasRenderingContext2D) => void) => {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n  ctx.save();\n  ctx.beginPath();\n  render(ctx);\n  ctx.closePath();\n  ctx.fill();\n  ctx.restore();\n};\n\nconst sceneInit = (canvas: HTMLCanvasElement, option: IClock.IOption) => {\n  const { width, height, dpi } = option;\n  // @ts-ignore\n  canvas.style.width = `${width}px`;\n  // @ts-ignore\n  canvas.style.width = `${height}px`;\n  // @ts-ignore\n  canvas.width = width * dpi;\n  // @ts-ignore\n  canvas.height = height * dpi;\n};\n\nconst clearScene = (canvas: HTMLCanvasElement) => {\n  const ctx = canvas.getContext('2d');\n  ctx?.clearRect(0, 0, canvas.width, canvas.height);\n};\n\nconst drawBg = (canvas: HTMLCanvasElement, color: IClock.IColor) => {\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = color;\n    // @ts-ignore\n    ctx.roundRect(0, 0, canvas.width, canvas.height, canvas.width * 20 / 240);\n  });\n};\n\nconst drawFace = (canvas: HTMLCanvasElement, color: string, center: IClock.ICenter) => {\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = color;\n    ctx.arc(center.x, center.y, center.radius, 0, 2 * Math.PI);\n  });\n};\n\nconst drawScale = (canvas: HTMLCanvasElement, cfg: Record<string, any>) => {\n  // const ctx = canvas.getContext('2d');\n  const { hourAngle, minuteAngle, center, hourScaleColor: mainColor, minuteScaleColor: subColor } = cfg;\n  // Draw hour scale\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = mainColor;\n    ctx.translate(center.x, center.y);\n    for (let h = 0; h < 12; h++) {\n      // @ts-ignore\n      ctx.roundRect(-2 * cfg.dpi, -center.radius + 2 * cfg.dpi, 4 * cfg.dpi, center.radius * 0.12, 2 * cfg.dpi);\n      ctx.rotate(hourAngle);\n    }\n  });\n  // Draw minute scale\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = subColor;\n    ctx.translate(center.x, center.y);\n    for (let m = 0; m < 60; m++) {\n      if (m % 5 > 0) {\n        // @ts-ignore\n        ctx.roundRect(-cfg.dpi, -center.radius + 2 * cfg.dpi, 2 * cfg.dpi, center.radius * 0.09, cfg.dpi);\n      }\n      ctx.rotate(minuteAngle);\n    }\n  });\n};\n\nconst drawNumber = (canvas: HTMLCanvasElement, cfg: Record<string, any>) => {\n  const { hourAngle, textColor, center } = cfg;\n  const textRadius = center.radius * 0.75;\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = textColor;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.font = `bold ${center.radius * 0.2}px sans-serif`;\n    ctx.translate(center.x, center.y);\n    for (let h = 0; h < 12; h++) {\n      // @ts-ignore\n      ctx.fillText(h === 0 ? 12: h, Math.sin(h * hourAngle) * textRadius, -Math.cos(h * hourAngle) * textRadius);\n    }\n  });\n};\n\nconst renderHour = (canvas: HTMLCanvasElement, num: number, cfg: Record<string, any>) => {\n  const { hourAngle, center } = cfg;\n  const hAngle = num * hourAngle / 3600000;\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = cfg.hourPointerColor;\n    ctx.translate(center.x, center.y);\n    ctx.arc(0, 0, 6 * cfg.dpi, 0, 2 * Math.PI);\n    ctx.rotate(hAngle);\n    // @ts-ignore\n    ctx.roundRect(-2 * cfg.dpi, -center.radius * 0.15, 4 * cfg.dpi, center.radius * 0.15, 4 * cfg.dpi);\n    // @ts-ignore\n    ctx.roundRect(-5 * cfg.dpi, -center.radius * 0.5, 10 * cfg.dpi, center.radius * 0.37, 10 * cfg.dpi);\n  });\n};\n\nconst renderMinute = (canvas: HTMLCanvasElement, num: number, cfg: Record<string, any>) => {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n  const { minuteAngle, center } = cfg;\n  const mAngle = num * minuteAngle / 60000;\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = cfg.hourPointerColor;\n    ctx.translate(center.x, center.y);\n    ctx.arc(0, 0, 6 * cfg.dpi, 0, 2 * Math.PI);\n    ctx.rotate(mAngle);\n    // @ts-ignore\n    ctx.roundRect(-2 * cfg.dpi, -center.radius * 0.15, 4 * cfg.dpi, center.radius * 0.15, 4 * cfg.dpi);\n    // @ts-ignore\n    ctx.roundRect(-4 * cfg.dpi, -center.radius * 0.8, 8 * cfg.dpi, center.radius * 0.67, 8 * cfg.dpi);\n  });\n};\n\nconst renderMillSecond = (canvas: HTMLCanvasElement, num: number, cfg: Record<string, any>) => {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n  const { milliAngle, center } = cfg;\n  const smAngle = num * milliAngle;\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = cfg.milliPointerColor;\n    ctx.translate(center.x, center.y);\n    ctx.arc(0, 0, 6 * cfg.dpi, 0, 2 * Math.PI);\n    ctx.rotate(smAngle);\n    // @ts-ignore\n    ctx.roundRect(-2 * cfg.dpi, -center.radius * 0.88, 4 * cfg.dpi, center.radius, 4 * cfg.dpi);\n  });\n\n  draw(canvas, (ctx: CanvasRenderingContext2D) => {\n    ctx.fillStyle = cfg.centerCircleColor;\n    ctx.translate(center.x, center.y);\n    ctx.arc(0, 0, 3 * cfg.dpi, 0, 2 * Math.PI);\n  });\n};\n\nexport default class WebClock {\n  cvs: HTMLCanvasElement;\n\n  option: IClock.IOption;\n\n  afId: any;\n\n  constructor(canvas: string | HTMLCanvasElement, option: IClock.IOption = {}) {\n    this.cvs = initCanvas(canvas) as HTMLCanvasElement;\n\n    this.option = { ...defaultOption, ...option };\n\n    this.draw();\n  }\n\n  draw() {\n    const circle = 2 * Math.PI;\n    const cfg: Record<string, any> = {\n      ...this.option,\n      ...themes[this.option.theme || 'apple-dark'],\n      ...(this.option.userTheme || {}),\n      hourAngle: circle / 12,\n      minuteAngle: circle / 60,\n      secondAngle: circle / 3600,\n      milliAngle: circle / 60000\n    };\n    const d = new Date();\n    const hour = d.getHours();\n    const minute = d.getMinutes();\n    const second = d.getSeconds();\n    const millisecond = d.getMilliseconds();\n    sceneInit(this.cvs, this.option);\n    cfg.center = {\n      x: this.cvs.width / 2,\n      y: this.cvs.height / 2,\n      radius: Math.min(this.cvs.width, this.cvs.height) * 0.45\n    };\n    clearScene(this.cvs);\n    drawBg(this.cvs, cfg.backgroundColor);\n    drawFace(this.cvs, cfg.faceColor, cfg.center);\n    drawScale(this.cvs, cfg);\n    if (cfg.showNumber) {\n      drawNumber(this.cvs, cfg);\n    }\n    renderHour(this.cvs, hour * (3600 * 1000) + minute * 60 * 1000 + second * 1000 + millisecond, cfg);\n    renderMinute(this.cvs, minute * 60 * 1000 + second * 1000 + millisecond, cfg);\n    renderMillSecond(this.cvs, second * 1000 + millisecond, cfg);\n\n    this.afId = requestAnimationFrame(() => {\n      this.draw();\n    });\n  }\n\n  destroy() {\n    if (this.afId) {\n      cancelAnimationFrame(this.afId);\n    }\n    this.cvs.parentNode?.removeChild(this.cvs);\n  }\n}\n"],"names":["defaultOption","theme","width","height","dpi","themes","backgroundColor","faceColor","hourScaleColor","minuteScaleColor","textColor","hourPointerColor","minutePointerColor","milliPointerColor","centerCircleColor","initCanvas","canvas","cvs","document","createElement","body","appendChild","querySelector","HTMLCanvasElement","draw","render","ctx","getContext","save","beginPath","closePath","fill","restore","sceneInit","option","style","clearScene","clearRect","drawBg","color","fillStyle","roundRect","drawFace","center","arc","x","y","radius","Math","PI","drawScale","cfg","hourAngle","minuteAngle","mainColor","subColor","translate","h","rotate","m","drawNumber","textRadius","textAlign","textBaseline","font","fillText","sin","cos","renderHour","num","hAngle","renderMinute","mAngle","renderMillSecond","milliAngle","smAngle","WebClock","_extends","_proto","prototype","circle","userTheme","secondAngle","d","Date","hour","getHours","minute","getMinutes","second","getSeconds","millisecond","getMilliseconds","min","showNumber","afId","requestAnimationFrame","_this","destroy","cancelAnimationFrame","_this$cvs$parentNode","parentNode","removeChild"],"mappings":"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"}